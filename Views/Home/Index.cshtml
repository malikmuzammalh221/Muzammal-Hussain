@model fortest.Models.AllViewModel
@{
    ViewBag.Title = "Home Page";
}
<style>
    .img-size {
        height: 250px;
        width: 350px;
    }

    .review-location {
        display: flex;
        align-items: center;
        margin-top: 12px;
        margin-bottom: 5px;
        margin-left: -6px;
    }

        .review-location h4 {
            margin: unset;
            padding: unset
        }

    .stars {
        color: gold;
        font-size: 20px;
    }

    .review-img {
        height: 70px;
        width: 70px;
        margin-top: -30px;
    }
    /* .paragraph-Length {
        white-space: nowrap;
        width: 280px;
        overflow: hidden;
        text-overflow: ellipsis;
    }*/
</style>

<!--welcome-hero start -->
<section id="Home" class="welcome-hero">
    <div class="container">
        <div class="welcome-hero-txt">
            <h2>best place to find and explore <br> that all you need </h2>
            <p>
                Find Best Place, Restaurant, Hotel, Real State and many more think in just One click
            </p>
        </div>
        <div class="welcome-hero-serch-box">
            <div class="welcome-hero-form">
                <div class="single-welcome-hero-form">
                    <h3>What?</h3>
                    <input type="text" id="PropertyType" placeholder="Find: Hotel, Restaurant, Office, House" />
                    <div class="welcome-hero-form-icon">
                        <i class="flaticon-list-with-dots"></i>
                    </div>
                </div>
            </div>
            <div class="welcome-hero-serch">
                <button class="welcome-hero-btn" id="searchButton">Search</button>
            </div>
        </div>
    </div>

</section><!--/.welcome-hero-->
<!--welcome-hero end -->

<!--list-topics start -->
<section id="list-topics" class="list-topics">
    <div class="container">
        <div class="list-topics-content">
            <ul>
                <li>
                    <div class="single-list-topics-content">
                        <div class="single-list-topics-icon">
                            <i class="flaticon-restaurant"></i>
                        </div>
                        <h2><a href="#">resturent</a></h2>
                        <p>@ViewBag.RestaurantCount Listing</p>
                    </div>
                </li>
                <li>
                    <div class="single-list-topics-content">
                        <div class="single-list-topics-icon">
                            <i class="flaticon-travel"></i>
                        </div>
                        <h2><a href="#">Office</a></h2>
                        <p>@ViewBag.OfficeCount</p>
                    </div>
                </li>
                <li>
                    <div class="single-list-topics-content">
                        <div class="single-list-topics-icon">
                            <i class="flaticon-building"></i>
                        </div>
                        <h2><a href="#">hotels</a></h2>
                        <p>@ViewBag.HotelsCount Listing</p>
                    </div>
                </li>
                <li>
                    <div class="single-list-topics-content">
                        <div class="single-list-topics-icon">
                            <i class="flaticon-pills"></i>
                        </div>
                        <h2><a href="#">healthcaree</a></h2>
                        <p>200 listings</p>
                    </div>
                </li>
                <li>
                    <div class="single-list-topics-content">
                        <div class="single-list-topics-icon">
                            <i class="flaticon-transport"></i>
                        </div>
                        <h2><a href="#">automotion</a></h2>
                        <p>120 listings</p>
                    </div>
                </li>
            </ul>
        </div>
    </div><!--/.container-->

</section><!--/.list-topics-->
<!--list-topics end-->
<div id="searchSection" style="display: none;">
    <section id="explore" class="explore">
        <div class="container">
            <div class="section-header">
                <h2>Search Result</h2>
            </div><!--/.section-header-->
            <div class="explore-content">
                <div class="row">

                    <div id="searchResults"></div>

                </div>
            </div>
        </div><!--/.container-->

    </section>
</div>
<!--works start -->
<section id="works" class="works">
    <div class="container">
        <div class="section-header">
            <h2>how it works</h2>
            <p>Learn More about how our website works</p>
        </div><!--/.section-header-->
        <div class="works-content">
            <div class="row">
                @foreach (var item in Model.HowWorkModels)
                {
                    <div class="col-md-4 col-sm-6">
                        <div class="single-how-works">
                            <div class="single-how-works-icon">
                                @*<i class="flaticon-lightbulb-idea"></i>*@
                                <i class="@item.Icon"></i>
                            </div>
                            <h2><a href=""><span>@item.Name</span></a></h2>
                            <p class="paragraph-Length">
                                @item.Description.Substring(0, 110)...
                            </p>
                            <a class="welcome-hero-btn how-work-btn" href="@Url.Action("HowItWorks", "Home",new { Id = item.Id })">
                                <div style="margin-top:8px">read more</div>
                            </a>
                        </div>
                    </div>
                }
            </div>
        </div><!--/.container-->
    </div>
</section><!--/.works-->
<!--works end -->
<!--explore start -->

<section id="Properties" class="explore">
    <div class="container">
        <div class="section-header">
            <h2>explore</h2>
            <p>Explore New place, food, culture around the world and many more</p>
        </div><!--/.section-header-->
        <div class="explore-content">
            <div class="row">

                @foreach (var item in Model.ExplorModels)
                {
                    <div class=" col-md-4 col-sm-6">
                        <div class="single-explore-item">
                            <div class="single-explore-img img-responsive">
                                <img class="img-size" src="@item.ExpFile.Replace("~/", "")" alt="explore image">
                                <div class="single-explore-img-info">
                                    <button onclick="window.location.href='#'">@item.Purpose</button>

                                </div>
                            </div>
                            <div class="single-explore-txt bg-theme-1">
                                <a href="@Url.Action("PropertyDetail", "Home",new { ExploreId = item.ExploreId })">@item.ExpName<h2 class=""></h2></a>
                                <p class="explore-rating-price">
                                    <span class="explore-rating">@item.ExpRating</span>
                                    <a href=""> 10 ratings</a>
                                    <span class="explore-price-box">
                                        Rs
                                        <span class="explore-price">@item.ExpPrice</span>
                                    </span>
                                    <a href="">
                                        @item.ExpType
                                    </a>
                                </p>
                                <div class="explore-person">
                                    <div class="row">
                                        <div class="col-sm-2">
                                            <div class="explore-person-img">
                                                <a href="#">
                                                    <img src="assets/images/explore/person.png" alt="explore person">
                                                </a>
                                            </div>
                                        </div>
                                        <div class="col-sm-10">
                                            <p>
                                                @(item.ExpDescription.Length > 85
                                                ? item.ExpDescription.Substring(0, 85) + "..."
                                                : item.ExpDescription)
                                            </p>

                                        </div>
                                    </div>
                                </div>
                                <div class="explore-open-close-part">
                                    <div class="row">
                                        <div class="col-sm-5">
                                            <button class="close-btn" onclick="window.location.href='#'">close now</button>
                                        </div>
                                        <div class="col-sm-7">
                                            <div class="explore-map-icon">
                                                <a href="#"><i data-feather="map-pin"></i></a>
                                                <a href="#"><i data-feather="upload"></i></a>
                                                <a href="#"><i data-feather="heart"></i></a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div><!--/.container-->

</section><!--/.explore-->
<!--explore end -->
<!--reviews start -->
<section id="Review" class="reviews">
    <div class="section-header">
        <h2>clients reviews</h2>
        <p>What our client say about us</p>
    </div><!--/.section-header-->
    <div class="reviews-content">
        <div class="testimonial-carousel">
            @foreach (var item in Model.ReviewModels)
            {

                <div class="single-testimonial-box">
                    <div class="testimonial-description">
                        <div class="testimonial-info">
                            <div class="testimonial-img">
                                <img class="testimonial-img img-circle review-img object-fit-fill" src="@item.RevFile.Replace("~/", "")" alt="clients">
                            </div><!--/.testimonial-img-->
                            <div class="testimonial-person">
                                <h2>@item.RevName</h2>
                                <div class="review-location">
                                    <i style="height:15px" class="fs-1" data-feather="map-pin"></i>
                                    <h4>@item.RevLocation</h4>
                                </div>
                                <div class="testimonial-person-star">
                                    <div class="stars">
                                        @for (int i = 1; i <= 5; i++)
                                        {
                                            if (i <= @item.RevRating)
                                            {
                                                @:★
                                            }
                                            else
                                            {
                                                @:☆
                                            }
                                        }
                                    </div>
                                </div>
                            </div><!--/.testimonial-person-->
                        </div><!--/.testimonial-info-->
                        <div class="testimonial-comment">
                            <p>
                                @item.RevReviewDetail
                            </p>
                        </div><!--/.testimonial-comment-->
                    </div><!--/.testimonial-description-->
                </div><!--/.single-testimonial-box-->

            }
        </div>
    </div>

</section><!--/.reviews-->
<!--reviews end -->
<!-- statistics strat -->
<section id="statistics" class="statistics">
    <div class="container">
        <div class="statistics-counter">
            <div class="col-md-3 col-sm-6">
                <div class="single-ststistics-box">
                    <div class="statistics-content">
                        <div class="counter">@ViewBag.TotalProperties</div> <span></span>
                    </div><!--/.statistics-content-->
                    <h3>listings</h3>
                </div><!--/.single-ststistics-box-->
            </div><!--/.col-->
            <div class="col-md-3 col-sm-6">
                <div class="single-ststistics-box">
                    <div class="statistics-content">
                        <div class="counter">40</div> <span>k+</span>
                    </div><!--/.statistics-content-->
                    <h3>listing categories</h3>
                </div><!--/.single-ststistics-box-->
            </div><!--/.col-->
            <div class="col-md-3 col-sm-6">
                <div class="single-ststistics-box">
                    <div class="statistics-content">
                        <div class="counter">65</div> <span>k+</span>
                    </div><!--/.statistics-content-->
                    <h3>visitors</h3>
                </div><!--/.single-ststistics-box-->
            </div><!--/.col-->
            <div class="col-md-3 col-sm-6">
                <div class="single-ststistics-box">
                    <div class="statistics-content">
                        <div class="counter">50</div> <span>k+</span>
                    </div><!--/.statistics-content-->
                    <h3>happy clients</h3>
                </div><!--/.single-ststistics-box-->
            </div><!--/.col-->
        </div><!--/.statistics-counter-->
    </div><!--/.container-->

</section><!--/.counter-->
<!-- statistics end -->
<!--blog start -->
<section id="Articles" class="blog">
    <div class="container">
        <div class="section-header">
            <h2>news and articles</h2>
            <p>Always upto date with our latest News and Articles </p>
        </div><!--/.section-header-->
        <div class="blog-content">
            <div class="row">
                @foreach (var item in Model.ArticleModels)
                {
                    <div class="col-md-4 col-sm-6">
                        <div class="single-blog-item">
                            <div class="single-blog-item-img">
                                @{
                                    if (item.ArtFile != null)
                                    {
                                        <img class="img-size" src="@item.ArtFile.Replace("~/", "")" alt="blog image">
                                    }
                                }

                            </div>
                            <div class="single-blog-item-txt">
                                <h2><a href="#">@item.ArtName</a></h2>
                                <h4>posted <span>by</span> <a href="#">@item.ArtPostedBy</a> @item.ArtDate</h4>
                                <p>
                                    @item.ArtDetails
                                </p>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div><!--/.container-->

</section><!--/.blog-->
<!--blog end -->
<!--subscription strat -->
<section id="contact" class="subscription">
    <div class="container">
        <div class="subscribe-title text-center">
            <h2>
                Do you want to add your business listing with us?
            </h2>
            <p>
                Listrace offers you the opportunity to list your business with us, and we are highly capable of promoting your business.
            </p>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <div class="subscription-input-group">
                    <form id="addAccountForm">
                        <input type="email" name="BusiEmail" id="BusiEmail" class="subscription-input-form" placeholder="Enter your email here" required>
                        <button class="appsLand-btn subscribe-btn" type="submit">
                            Add account
                        </button>
                    </form>
                </div>
            </div>
        </div>
        <div id="formResponse" class="text-center" style="margin-top: 15px; display: none;"></div>
    </div>
</section><!--/subscription-->
<!--subscription end -->


<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    //Add Email start
    $(document).ready(function () {
        $("#addAccountForm").on("submit", function (e) {
            e.preventDefault(); // Prevent form submission

            const email = $("#BusiEmail").val();

            $.ajax({
                url: '@Url.Action("AddAccount", "Home")',
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify({ BusiEmail: email }),
                success: function (response) {
                    const messageBox = $("#formResponse");
                    if (response.success) {
                        messageBox.css("color", "green").text(response.message).fadeIn();
                        $("#BusiEmail").val(""); // Clear the input
                    } else {
                        messageBox.css("color", "red").text(response.message).fadeIn();
                    }
                },
                error: function () {
                    $("#formResponse").css("color", "red").text("An error occurred while processing the request.").fadeIn();
                }
            });
        });

    });
    //Add Email end

</script>
<script>
    $(document).ready(function () {
        $('#searchButton').click(function () {
            const searchTerm = $('#PropertyType').val().trim();

            if (!searchTerm) {
                alert('Please enter a search term.');
                return;
            }

            $.ajax({
                url: '/Home/SearchByName',
                type: 'GET',
                data: { searchTerm: searchTerm },
                success: function (response) {
                    if (response.success) {

                        $('#searchSection').show();

                        let resultsHtml = '';

                        if (response.properties.length > 0) {
                            response.properties.forEach(property => {
                                resultsHtml += `
                                    
                                       <div class=" col-md-4 col-sm-6">
                                        <div class="single-explore-item">
                                            <div class="single-explore-img img-responsive">
                                                <img class="img-size" src="@*@item.ExpFile.Replace("~/", "")*@ ${property.ExpFile}" alt="explore image">
                                                <div class="single-explore-img-info">
                                                    <button onclick="window.location.href='#'"> ${property.ExpType}</button>

                                                </div>
                                            </div>
                                            <div class="single-explore-txt bg-theme-1">
                                                @*<a href="@Url.Action("PropertyDetail", "Home",new { ExploreId = item.ExploreId })">@item.ExpName </a>*@<h2 class="">${property.ExpName}</h2>
                                                <p class="explore-rating-price">
                                                    <span class="explore-rating">5.0</span>
                                                    <a href=""> 10 ratings</a>
                                                    <span class="explore-price-box">
                                                        Rs
                                                        <span class="explore-price"> ${property.ExpPrice}</span>
                                                    </span>
                                                    <a href="">
                                                         ${property.ExpType}
                                                    </a>
                                                </p>
                                                <div class="explore-person">
                                                    <div class="row">
                                                        <div class="col-sm-2">
                                                            <div class="explore-person-img">
                                                                <a href="#">
                                                                    <img src="assets/images/explore/person.png" alt="explore person">
                                                                </a>
                                                            </div>
                                                        </div>
                                                        <div class="col-sm-10">
                                                            <p>

                                                                ${property.ExpDescription.Length > 85
                                                                ? property.ExpDescription.Substring(0, 85) + "..."
                                                                : property.ExpDescription}
                                                            </p>

                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="explore-open-close-part">
                                                    <div class="row">
                                                        <div class="col-sm-5">
                                                            <button class="close-btn" onclick="window.location.href='#'">close now</button>
                                                        </div>
                                                        <div class="col-sm-7">
                                                            <div class="explore-map-icon">
                                                                <a href="#"><i data-feather="map-pin"></i></a>
                                                                <a href="#"><i data-feather="upload"></i></a>
                                                                <a href="#"><i data-feather="heart"></i></a>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                `;
                            });
                        } else {
                            resultsHtml = '<p>No matching properties found.</p>';
                        }

                        $('#searchResults').html(resultsHtml);
                    } else {
                        alert(response.message);
                    }
                },
                error: function () {
                    alert('An error occurred while searching.');
                }
            });
        });
    });
</script>




